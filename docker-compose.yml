version: '2'

services:
    web:
        restart: always
        build: ./blockchain_core
        ports:
            - "5010:5000"
        command: python flask_app.py
        depends_on:
            - postgres

    postgres:
        restart: always
        build: ./postgres
        volumes_from:
            - data
        ports:
            - "5433:5432"

    data:
        image: postgres:9.6
        volumes:
            - /var/lib/postgresql
        command: "true"
